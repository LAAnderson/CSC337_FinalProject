<!--
Author:     Logan Anderson
Course:     CSC 337
File:       storefront.html
Purpose:    storefront for the course final project
-->

<!--
TODO:
    - Manage the space of the webpage better, inspect element
      to see where divs lie
    - Figure out how to keep the search query while filtering
    - Use dynamic product loading + load more button near footer
-->
<!DOCTYPE html>
<html>
    <head>
        <script>
            /*
            each object in my collection is in the shape of the following:
            {
                "_id": { //<-- this is the field of the object i pass the addToCart() function
                    "$oid": "69374468b5fd699d191e3e27"
                },
                "name": "...",
                "description": "...",
                "price": "...";
                "img": "...";
                "rating": "...";
                "genres": [...]
            }
            
            you should be able to get the game with its id and copy/paste the information into your db
            */
            function addToCart(gameID) {
                // Jordan, please implement :)
            }

            async function fetchItems(query) {
                try {
                    const url_params = location.search
                    const response = await fetch('http://localhost:8080/getproducts'+location.search);
                    const items = await response.json();
                    const productspace= document.getElementById('productspace');

                    items.forEach(item => {
                        var product = document.createElement('div');
                        product.setAttribute('class', 'product')
                        product.innerHTML = `
                        <h3 style="text-align: center;">${product.name}</h3>
                        <img width="100%" height="50%" src="${product.img}">
                        <div style="display: grid; grid-template-columns: 33% 34% 33%;">
                            <div style="text-align: center">Price:<br>$${product.price}</div>
                            <div style="text-align: center">Rating:<br>${generateRating(product.rating)}</div>
                            <div style="text-align: center"><button onclick="addToCart('${product._id}')">Purchase</button></div>`
                        productspace.appendChild(product);
                    });
                } catch (error) {
                    console.error('Error fetching items:', error);
                }
            }

            fetchItems();
        </script>
        <style>
            body {
                margin-left: 0;
            }
            header {
                display: grid;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                padding: 15px;
                grid-template-columns: 33% 34% 33%;
                background-color: aqua;
                border: 0;
                text-align: center;
            }
            .main {
                margin-top: 80px;
                height: 100%
            }
            .filters {
                padding-left: 15px;
                float: left;
                border-right: 3px solid black;
                width: 200px;
                height: 100vh;
            }
            .contentbody {
                padding: 20px 225px;
            }
            .searchbox {
                padding: 5px 25px;
                border: 3px solid black;
                border-radius: 15px;
                width: 97%;
            }
            #searchbar {
                width: 70%;
                padding: 10px;
                margin-bottom: 15px;
            }
            #searchbutton {
                width: 25%;
                padding: 10px;
            }
            .productspace {
                display: grid;
                grid-template-columns: 33% 34% 33%;
                gap: 10px;

            }
            .product {
                width: 100%;
                height: 300px;
                border: 3px solid black;
                border-radius: 15px;
            }
            
            
        </style>
    </head>
    <body>
        <header> 
            <div>
                <p><a href="login.html">Login</a></p>
            </div>
            <div>
                <p>OnlineGameStore</p>
            </div>
            <div>
                <a href="shoppingcart.html">
                    <img width="40px" src="data:image/png;base64,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">
                </a>
            </div>
        </header>

        <div class="main">
            <div class="filters">
                <form method="get">
                    <h3>Filter by Catagory</h3>
                    <p>Genre</p>
                    <input type="checkbox" id="action" name="genre[]" value="action">
                    <label for="action">Action</label><br>

                    <input type="checkbox" id="platformer" name="genre[]" value="platformer">
                    <label for="platformer">Platformer</label><br>

                    <input type="checkbox" id="shooter" name="genre[]" value="shooter">
                    <label for="shooter">Shooter</label><br>

                    <input type="checkbox" id="fps" name="genre[]" value="fps">
                    <label for="fps">FPS</label><br>

                    <input type="checkbox" id="hero_shooter" name="genre[]" value="hero shooter">
                    <label for="hero_shooter">Hero Shooter</label><br>

                    <input type="checkbox" id="fighting" name="genre[]" value="fighting">
                    <label for="fighting">Fighting</label><br>

                    <input type="checkbox" id="stealth" name="genre[]" value="stealth">
                    <label for="stealth">Stealth</label><br>

                    <input type="checkbox" id="survival" name="genre[]" value="survival">
                    <label for="survival">Survival</label><br>

                    <input type="checkbox" id="rhythm" name="genre[]" value="rhythm">
                    <label for="rhythm">Rhythm</label><br>

                    <input type="checkbox" id="battle_royal" name="genre[]" value="battle_royal">
                    <label for="battle_royal">Battle Royal</label><br>

                    <input type="checkbox" id="puzzle" name="genre[]" value="puzzle">
                    <label for="puzzle">Puzzle</label><br>

                    <input type="checkbox" id="rpg" name="genre[]" value="rpg">
                    <label for="rpg">RPG</label><br>

                    <input type="checkbox" id="racing" name="genre[]" value="racing">
                    <label for="racing">Racing</label><br>

                    <input type="checkbox" id="competative" name="genre[]" value="competative">
                    <label for="competative">Competative</label><br>

                    <input type="checkbox" id="open_world" name="genre[]" value="open_world">
                    <label for="open_world">Open World</label><br>

                    <input type="checkbox" id="sandbox" name="genre[]" value="sandbox">
                    <label for="sandbox">Sandbox</label><br>
                    

                    <p>Rating</p>
                    <input type="checkbox" id="rating0-1" name="rating[]" value="0-1">
                    <label for="rating0-1">0-1 Stars</label><br>

                    <input type="checkbox" id="rating1-2" name="rating[]" value="1-2">
                    <label for="rating1-2">1-2 Stars</label><br>
                    
                    <input type="checkbox" id="rating2-3" name="rating[]" value="2-3">
                    <label for="rating2-3">2-3 Stars</label><br>
                    
                    <input type="checkbox" id="rating3-4" name="rating[]" value="3-4">
                    <label for="rating3-4">3-4 Stars</label><br>
                    
                    <input type="checkbox" id="rating4+" name="rating[]" value="4+">
                    <label for="rating4+">4+ Stars</label><br>
                    

                    <p>Price</p>
                    <input type="checkbox" id="price0-10" name="price[]" value="0-10">
                    <label for="price0-10">$0-$9.99</label><br>

                    <input type="checkbox" id="price10-20" name="price[]" value="10-20">
                    <label for="price0-10">$10 - $19.99</label><br>

                    <input type="checkbox" id="price20-30"name="price[]" value="20-30">
                    <label for="price0-10">$20 - $29.99</label><br>

                    <input type="checkbox" id="price40-40"name="price[]" value="30-40">
                    <label for="price0-10">$30 - $39.99</label><br>

                    <input type="checkbox" id="price40-50"name="price[]" value="40-50">
                    <label for="price0-10">$40 - $49.99</label><br>

                    <input type="checkbox" id="price50+"name="price[]" value="50+">
                    <label for="price0-10">$50+</label><br>
                    
                    
                    <input type="submit" value="Filter">
                </form>
            </div>

            <div class="contentbody">
                <div class="searchbox">
                    <h1>Search for Products</h1>
                    <form method="get">
                        <input type="search" id="searchbar" name="searchbar">
                        
                        <input type="submit" value="Search" id="searchbutton">
                    </form>
                    
                </div>
                <div id="productspace" class="productspace">
                </div> 
            </div>
            
        </div>
        <footer>
            <a href="admin-login.html">AdMin Login</a>
        </footer>
    </body>
</html>